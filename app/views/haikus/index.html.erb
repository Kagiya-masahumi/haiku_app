
<body>
<%# 読み込みアニメ %>
<div id="splash">
  <div id="splash-logo">みんなの細道</div>
</div>
<div class="splashbg"></div>
<%# /読み込みアニメ %>

<%# モーダル %>
<div class="signup-modal-wrapper" id="signup-open">
  <!-- 新規登録用のモーダル -->

  <div class="modal" id="signup-modal">

    <%# 『閉じる』ボタン %>
    <div class="close-modal ">
      <i class="far fa-times-circle fa-lg close-btn"></i>
    </div>

    <div id="signup-form">
      <h2>Emailで新規登録</h2>
      <%# <form action="#">
        <input class="form-control" type="text" placeholder="メールアドレス">
        <input class="form-control" type="password" placeholder="パスワード">
        
        <div id="submit-btn">新規登録</div>
      </form> %>

      <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
        <%= devise_error_messages! %>

        <div class="field">
          <%= f.label :name, "名前" %><br />
          <%= f.text_field :name %>
        </div>

        <div class="field">
          <%= f.label :email, "メールアドレス" %><br />
          <%= f.email_field :email %>
        </div>

        <div class="field">
          <%= f.label :password, "パスワード" %>
          <% if @minimum_password_length %>
            <em>(<%= @minimum_password_length %> 文字以上の半角英数字)</em>
          <% end %><br />
          <%= f.password_field :password, autocomplete: "off" %>
        </div>

        <div class="field">
          <%= f.label :password_confirmation, "パスワード再入力" %><br />
          <%= f.password_field :password_confirmation, autocomplete: "off" %>
        </div>

        <div class="submit-btn-wrapper">
          <div class="actions" id="submit-btn">
            <%= f.submit "新規登録" %>
          </div>
        </div>
        
      <% end %>
      </div>
    </div>
  </div>
</div>

<div class="login-modal-wrapper" id="login-open">
<!-- ログイン用のモーダル -->
  <div class="modal" id="login-modal">

    <%# 『閉じる』ボタン %>
    <div class="close-modal">
      <i class="far fa-times-circle fa-lg close-btn"></i>
    </div>

    <div id="login-form">
      <h2>Emailログイン</h2>

      <%# <form action="#">
        <input class="form-control" type="text" placeholder="メールアドレス">
        <input class="form-control" type="password" placeholder="パスワード">
        <div id="submit-btn">ログイン</div>
      </form> %>
      <%=  form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
        <div class="field">
          <%= f.label :email, "メールアドレス" %><br />
          <%= f.email_field :email, autofocus: true %>
        </div>

        <div class="field">
          <%= f.label :password, "パスワード" %><br />
          <%= f.password_field :password, autocomplete: "off" %>
        </div>

        <% if devise_mapping.rememberable? %>
          <div class="field">
            <%= f.label :remember_me %><br />
            <%= f.check_box :remember_me %>
          </div>
        <% end -%>

        <div class="submit-btn-wrapper">
          <div class="actions" id="submit-btn">
            <%= f.submit "ログイン" %>
          </div>
        </div>
        
      <% end %>
    </div>
  </div>
</div>

<div id="container"><%# 画面遷移用 %>
  <%# 巻物部分 %>
  <div class="makimono">
    <%# タイトル巻物 %>
    <div class="title-makimono">
      <div class="title">
        みんなのほそ道
      </div>
    </div>
    <%# /タイトル巻物 %>
    <%# メイン(投稿一覧)画面 %>
    <div class="card_wrapper">
      <h2>とうこういちらん</h2>
      <div class="haiku-list slide-paused" ontouchstart="">

      <% if @haikus.length < 6%>
        <ul class="card">
          <%= render partial: 'shared/haiku', collection: @haikus %>
        </ul>
      <% else %>
        <ul class="card">
          <%= render partial: 'shared/haiku', collection: @haikus %>
        </ul>
        <ul class="card">
          <%= render partial: 'shared/haiku', collection: @haikus %>
        </ul>
      <% end %>

      </div>
    </div>
    <%# /メイン(投稿一覧)画面 %>
    <%# サイドバー %>
    <div class="side_bar">
      <div class="top_wrapper">
        <div>
          <%= link_to "春", season_search_haikus_path(season_id: 1) %>
          <%= link_to "夏", season_search_haikus_path(season_id: 2) %>  
          <%= link_to "秋", season_search_haikus_path(season_id: 3) %>  
          <%= link_to "冬", season_search_haikus_path(season_id: 4) %> 
          <%= link_to "全て", root_path %>  
        </div>
        <div class="user-content">
          <% if user_signed_in? %>
            <%= link_to current_user.name, haiku_path(current_user.id) %>
            <%= link_to "ろぐあうと", destroy_user_session_path, method: :delete %>
          <% else %>
            <div class="btn" id="login-show">ろぐいん</div>
            <div class="btn signup signup-show" >しんきとうろく</div>
          <% end %>
        </div>
      </div>

      <%= form_with model: @haiku, local: true do |f| %>
        <div class="center_wrapper">
          <div class="haiku-post">
            <span>ここで一句</span>
          </div>
          <div class="field">
            上の句
            <%= f.text_area :kami, class: "inputfield inputfield_kami" %>
          </div>
          <div class="field">
            中の句
            <%= f.text_area :naka, class: "inputfield inputfield_naka" %>
          </div>
          <div class="field">
            下の句
            <%= f.text_area :shimo, class: "inputfield inputfield_shimo" %>
          </div>
        </div>

        <div class="bottom_wrapper">
        <div class="field-season">
          <%= f.collection_select(:season_id, Season.all, :id, :name, {}, {class:"season-select"}) %>
        </div>
          <div class="field">
            <%= f.submit "投稿", class: "send_btn" %>
          </div>
        </div>
      <% end %>
    </div>
    <%# /サイドバー %>
  </div>
  <%# /巻物部分 %>
</div>

<script src="../javascript/load_anime.js"></script>
<script src="../javascript/modal_script.js"></script>
</body>